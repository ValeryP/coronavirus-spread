(this["webpackJsonpcoronavirus-spread"]=this["webpackJsonpcoronavirus-spread"]||[]).push([[0],{145:function(e,t,a){e.exports=a(302)},267:function(e,t){},302:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),i=a(11),l=a(124),u=a.n(l),s=a(58),d=a(125);function m(e){var t=e.labelsPlot,a=e.dataExistingPlot,n=e.dataPredictedPlot,o=e.country,c=e.color,i={backgroundColor:c+"AA",borderColor:c,pointBorderColor:c,pointHoverBackgroundColor:c,pointHoverBorderColor:c+"33",pointBackgroundColor:"#fff",fill:!1,lineTension:.1,borderCapStyle:"butt",borderDashOffset:0,borderJoinStyle:"miter",pointBorderWidth:1,pointHoverRadius:10,pointHoverBorderWidth:2,pointHitRadius:10},l=Object(s.a)({},i,{borderDash:[],pointRadius:3}),u=Object(s.a)({},i,{borderDash:[5,2],pointRadius:2,backgroundColor:"#000AA",borderColor:"#2196f3",pointHoverRadius:5,pointBorderColor:"#2196f3",pointHoverBackgroundColor:"#2196f3",pointHoverBorderColor:"#00033"});return r.a.createElement(d.a,{data:{labels:t,datasets:[Object(s.a)({},l,{label:o,data:a}),Object(s.a)({},u,{label:o+" (predicted)",data:n})]},width:100,height:45,legend:null})}var f=a(331),p=a(343),v=a(339),b=a(340),g=a(335),h=a(336),y=a(344),E=a(337),O=a(328),C=a(342),j=a(3),S=a.n(j),k=a(18),w=a(28),N=a.n(w),I=a(341),D=a(137),P=a.n(D),R=a(127),W=a.n(R),_=new(0,a(301).Octokit),L=Object(O.a)((function(e){return Object(C.a)({root:{marginLeft:0,margin:e.spacing(2),textAlign:"center"},formControl:{margin:e.spacing(2),minWidth:100},footer:{opacity:.5},latestUpdate:{opacity:.5},chart:{width:"90%"},infoIcon:{color:e.palette.grey.A200,height:e.spacing(2),width:e.spacing(2),marginTop:4,marginLeft:2}})}));var B=function(){var e=L(),t={Confirmed:"#f57c00",Deaths:"#FC562E",Recovered:"#388e3c"},a={Tomorrow:1,"2 days":2,"3 days":3,"1 week":7},o=Object(I.a)(["saved-prefs"]),c=Object(i.a)(o,2),l=c[0],s=c[1],d=Object(n.useState)([]),O=Object(i.a)(d,2),C=O[0],j=O[1],w=Object(n.useState)(l.country||"Worldwide"),D=Object(i.a)(w,2),R=D[0],B=D[1],x=Object(n.useState)(l.type||"Confirmed"),H=Object(i.a)(x,2),T=H[0],A=H[1],F=Object(n.useState)([]),G=Object(i.a)(F,2),V=G[0],z=G[1],J=Object(n.useState)(l.prediction||1),U=Object(i.a)(J,2),M=U[0],K=U[1],q=Object(n.useState)([]),Q=Object(i.a)(q,2),X=Q[0],Y=Q[1],Z=Object(n.useState)(""),$=Object(i.a)(Z,2),ee=$[0],te=$[1],ae=r.a.useRef(null),ne=r.a.useState(0),re=Object(i.a)(ne,2),oe=re[0],ce=re[1],ie=r.a.useRef(null),le=r.a.useState(0),ue=Object(i.a)(le,2),se=ue[0],de=ue[1],me=r.a.useRef(null),fe=r.a.useState(0),pe=Object(i.a)(fe,2),ve=pe[0],be=pe[1];r.a.useEffect((function(){ce(ae.current.offsetWidth),de(ie.current.offsetWidth),be(me.current.offsetWidth)}),[]);var ge=function(e){var t=e.target.value;k.a.event({category:"Select",action:"Country",label:t}),s("country",t,{path:"/"}),B(t)},he=function(e){var t=e.target.value;k.a.event({category:"Select",action:"Range",label:S.a.findKey(t)}),s("prediction",t,{path:"/"}),K(t)},ye=function(e){var t=e.target.value;k.a.event({category:"Select",action:"Type",label:t}),s("type",t,{path:"/"}),A(t)};return Object(n.useEffect)((function(){u.a.parse("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-"+T+".csv",{skipEmptyLines:!0,header:!0,download:!0,delimiter:",",complete:function(e){var t=e.data,a=S.a.map(S.a.slice(S.a.keys(t[0]),4),(function(e){return N()(e).add(1,"days").toDate()})),n=S.a.concat(["Worldwide"],S.a.sortBy(t.map((function(e){return e["Province/State"].length>0?"".concat(e["Country/Region"],"/").concat(e["Province/State"]):e["Country/Region"]}))));z(n),j(a),Y(t)}})}),[T]),Object(n.useEffect)((function(){_.repos.listCommits({owner:"CSSEGISandData",repo:"COVID-19"}).then((function(e){var t=S.a.values(e.data)[0].commit.committer.date;te(N()(t).fromNow())}))}),[]),r.a.createElement(g.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:e.root},r.a.createElement(g.a,{item:!0},r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{variant:"outlined",className:e.formControl},r.a.createElement(p.a,{ref:me,id:"select-type-input-id"},"Type"),r.a.createElement(v.a,{labelId:"select-type-select-label",id:"select-type-select-id",value:T,onChange:ye,labelWidth:ve},S.a.map(S.a.keys(t),(function(e,t){return r.a.createElement(b.a,{key:t,value:e},e)}))))),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{variant:"outlined",className:e.formControl},r.a.createElement(p.a,{ref:ae,id:"select-country-input-id"},"Location"),r.a.createElement(v.a,{labelId:"select-country-select-label",id:"select-country-select-id",value:R,onChange:ge,labelWidth:oe},V.map((function(e,t){return r.a.createElement(b.a,{key:t,value:e},e)}))))),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{variant:"outlined",className:e.formControl},r.a.createElement(p.a,{ref:ie,id:"select-days-input-id"},"Prediction"),r.a.createElement(v.a,{labelId:"select-days-select-label",id:"select-days-select-id",value:M,onChange:he,labelWidth:se},S.a.map(a,(function(e,t){return r.a.createElement(b.a,{key:e,value:e},t)})))))),r.a.createElement(g.a,{item:!0,container:!0,direction:"column",className:e.chart},function(){function a(e,t){var a=S.a.indexOf(S.a.keys(e),N()(t).format("l")),n=S.a.slice(S.a.values(e),a-3,a+1),r=S.a.reduce(n,(function(e,t,a){var r=n[a-1];return a>0&&r>0&&!isNaN(t)&&!isNaN(r)&&(e[a-1]=t/r),e}),[]),o=S.a.filter(r,(function(e){return!S.a.isNaN(e)})),c=S.a.mean(o)||1;return S.a.reduce(S.a.range(1,2),(function(e,t,a){return e[a]=Math.round(S.a.reduce(S.a.range(0,t),(function(e){return e*c}),1)*(S.a.last(n)||0)),e}),[])[0]}function n(e,t){return S.a.zipObject(e.map((function(e){return N()(e).format("l")})),t)}function o(e,t,r){for(var o,c=n(e,S.a.concat([0],S.a.take(S.a.map(e,(function(e){return a(t,e)})),S.a.values(t).length))),i=1;i<r;i++){var l=a(c,e[S.a.findIndex(S.a.values(c),(function(e){return void 0===e}))-1]);c=n(e,S.a.concat((o=S.a.values(c),S.a.filter(o,(function(e){return void 0!==e}))),[l]))}return S.a.values(c)}var c=S.a.concat(C,function(e,t){return S.a.reduce(S.a.range(1,+t+1),(function(t,a,n){return t[n]=N()(e||Date.now()).add(n+1,"days").toDate(),t}),[])}(S.a.last(C),M)),i=function(e){if("Worldwide"===e){var t=S.a.map(X,(function(e){return S.a.slice(S.a.values(e),4)}));return S.a.filter(S.a.reduce(t,(function(e,a,n){return e[n]=String(S.a.sum(S.a.map(t,(function(e){return Number(e[n])})))),e}),[]),(function(e){return Number(e)>0}))}return S.a.slice(S.a.values(S.a.find(X,(function(t){var a=-1!==S.a.indexOf(e,"/"),n=a?S.a.split(e,"/")[0]:e,r=a?S.a.split(e,"/")[1]:"";return t["Country/Region"]===n&&t["Province/State"]===r}))),4)}(R).map(Number),l=n(C,i),u=o(c,l,M),s=S.a.findIndex(S.a.values(l),(function(e){return e>0}))-1;s=s<0?0:s;var d=S.a.values(l).slice(s),f=S.a.values(u).slice(s),p=c.slice(s).map((function(e){return N()(e).format("ll")})),v=function(e,t,a){var n=S.a.zipWith(e,t,(function(e,t){if(e===t)return 0;if(0===e||0===t)return 100*(e+t);var a=S.a.max([e,t]),n=S.a.min([e,t]);return 100*Math.abs(1-a/n)})),r=n.length-a-7<0?0:n.length-a-7,o=S.a.slice(n,r,r+7).filter((function(e){return!isNaN(e)})),c=S.a.round(100-S.a.mean(o),1);return c<=0?1:c>=100?99:c}(d,f,M),b=S.a.findLast(o(c,l,1),(function(e){return void 0!==e})),O=t[T];return X.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{item:!0},r.a.createElement(g.a,{item:!0,container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(g.a,{item:!0},r.a.createElement(h.a,{variant:"caption"},W()("There is <strong>".concat(v,"%</strong> chance to have <strong>").concat(b,"</strong> ").concat(S.a.lowerCase(T)," tomorrow (").concat(R,")")))),r.a.createElement(g.a,{item:!0},r.a.createElement(y.a,{title:"The accuracy calculation is based on a comparison of the last 7 days prediction and actual values of those days",arrow:!0,TransitionComponent:E.a},r.a.createElement(P.a,{className:e.infoIcon}))))),r.a.createElement(g.a,{item:!0},r.a.createElement(m,{labelsPlot:p,dataExistingPlot:d,dataPredictedPlot:f,country:R,color:O}))):""}()),r.a.createElement(g.a,{item:!0,className:e.footer},r.a.createElement(h.a,{variant:"caption"},r.a.createElement(k.a.OutboundLink,{eventLabel:"Data source",target:"_blank",to:"https://github.com/CSSEGISandData/COVID-19"},"Data source")," | ",r.a.createElement(k.a.OutboundLink,{eventLabel:"Feedback",target:"_blank",to:"https://t.me/coronavirus_spread"},"Feedback")," | ",r.a.createElement(k.a.OutboundLink,{eventLabel:"Github",target:"_blank",to:"https://github.com/ValeryP/coronavirus-spread"},"Github"))),ee&&r.a.createElement(g.a,{item:!0,className:e.latestUpdate},r.a.createElement(h.a,{variant:"caption"},"Latest update ".concat(ee))))},x=a(138),H=a(338);k.a.initialize("UA-160685541-1"),k.a.pageview(window.location.pathname);var T=Object(x.a)();c.a.render(r.a.createElement(H.a,{theme:T},r.a.createElement(B,null)),document.getElementById("root"))}},[[145,1,2]]]);
//# sourceMappingURL=main.ea22a0ea.chunk.js.map