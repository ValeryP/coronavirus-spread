(this["webpackJsonpcoronavirus-spread"]=this["webpackJsonpcoronavirus-spread"]||[]).push([[0],{107:function(e,t,a){e.exports=a(220)},220:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a.n(c),i=a(9),l=a(92),u=a.n(l),s=a(49),d=a(93),m=a(6),f=a.n(m),p=a(27),b=a.n(p);function v(e){var t=e.labels,a=e.dataPerCountry,n=e.country,c=e.days,o=e.color,i={backgroundColor:o+"AA",borderColor:o,pointBorderColor:o,pointHoverBackgroundColor:o,pointHoverBorderColor:o+"33",pointBackgroundColor:"#fff",fill:!1,lineTension:.1,borderCapStyle:"butt",borderDashOffset:0,borderJoinStyle:"miter",pointBorderWidth:1,pointHoverRadius:10,pointHoverBorderWidth:2,pointHitRadius:10},l=Object(s.a)({},i,{borderDash:[],pointRadius:3}),u=Object(s.a)({},i,{borderDash:[5,5],pointRadius:5});function m(){var e=function(e){var t=f.a.slice(a,a.length-e-1).filter((function(e){return"0"!==e})).length;return t<e?t-1:e}(3),t=f.a.slice(a,a.length-e-1).map((function(e){return Number(e)})),n=t.map((function(e,a){return 0===a?0:e-t[a-1]})).map((function(e,a){return 1+e/t[a]})),r=f.a.slice(n,n.length-e),o=r.reduce((function(e,t){return e+t}),0)/r.length||0;return f.a.reduce(f.a.range(1,c+1),(function(e,a,n){return e[n]=Math.round(f.a.reduce(f.a.range(0,a),(function(e){return e*o}),1)*(f.a.last(t)||0)),e}),[])}return r.a.createElement(d.a,{data:function(){var e=f.a.slice(m(),0,c),r=function(e){return f.a.reduce(e,(function(e,a,n){return e[n]=b()(f.a.last(t)||Date.now()).add(n+1,"days").toDate(),e}),[])}(e),o=f.a.concat(a.map((function(e){return Number(e)})),e.map((function(){return NaN}))),i=f.a.concat(a.map((function(e,t){return t!==a.length-1?NaN:e})),e),d=f.a.concat(t,r).map((function(e){return b()(e).format("ll")})),p=f.a.findIndex(o,(function(e){return e>0}))-1;return p=p<0?0:p,{labels:d.slice(p),datasets:[Object(s.a)({},l,{label:n,data:o.slice(p)}),Object(s.a)({},u,{label:n+" (predicted)",data:i.slice(p)})]}}(),width:100,height:45,legend:null})}var h=a(252),g=a(261),y=a(257),E=a(258),O=a(254),C=a(255),j=a(249),S=a(260),k=a(14),w=a(259),N=new(0,a(219).Octokit),D=Object(j.a)((function(e){return Object(S.a)({root:{marginLeft:0,margin:e.spacing(2),textAlign:"center"},formControl:{margin:e.spacing(2),minWidth:100},footer:{marginTop:e.spacing(2),opacity:.5},latestUpdate:{opacity:.5},chart:{width:"90%"}})}));var _=function(){var e=D(),t={Confirmed:"#2C98F0",Deaths:"#FC562E",Recovered:"#52AF55"},a={Tomorrow:1,"2 days":2,"3 days":3,"1 week":7},c=Object(w.a)(["saved-prefs"]),o=Object(i.a)(c,2),l=o[0],s=o[1],d=Object(n.useState)([]),m=Object(i.a)(d,2),p=m[0],j=m[1],S=Object(n.useState)(l.country||"Worldwide"),_=Object(i.a)(S,2),I=_[0],R=_[1],W=Object(n.useState)(l.type||"Confirmed"),L=Object(i.a)(W,2),B=L[0],F=L[1],P=Object(n.useState)([]),A=Object(i.a)(P,2),G=A[0],H=A[1],T=Object(n.useState)(l.prediction||1),x=Object(i.a)(T,2),V=x[0],J=x[1],U=Object(n.useState)([]),z=Object(i.a)(U,2),K=z[0],M=z[1],q=Object(n.useState)(""),Q=Object(i.a)(q,2),X=Q[0],Y=Q[1],Z=r.a.useRef(null),$=r.a.useState(0),ee=Object(i.a)($,2),te=ee[0],ae=ee[1],ne=r.a.useRef(null),re=r.a.useState(0),ce=Object(i.a)(re,2),oe=ce[0],ie=ce[1],le=r.a.useRef(null),ue=r.a.useState(0),se=Object(i.a)(ue,2),de=se[0],me=se[1];r.a.useEffect((function(){ae(Z.current.offsetWidth),ie(ne.current.offsetWidth),me(le.current.offsetWidth)}),[]);var fe=function(e){var t=e.target.value;k.a.event({category:"Select",action:"Country",label:t}),s("country",t,{path:"/"}),R(t)},pe=function(e){var t=e.target.value;k.a.event({category:"Select",action:"Range",label:f.a.findKey(t)}),s("prediction",t,{path:"/"}),J(t)},be=function(e){var t=e.target.value;k.a.event({category:"Select",action:"Type",label:t}),s("type",t,{path:"/"}),F(t)};return Object(n.useEffect)((function(){u.a.parse("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-"+B+".csv",{skipEmptyLines:!0,header:!0,download:!0,delimiter:",",complete:function(e){var t=e.data,a=f.a.map(f.a.slice(f.a.keys(t[0]),4),(function(e){return b()(e).add(1,"days").toDate()})),n=f.a.concat(["Worldwide"],f.a.sortBy(t.map((function(e){return e["Province/State"].length>0?"".concat(e["Country/Region"],"/").concat(e["Province/State"]):e["Country/Region"]}))));H(n),j(a),M(t)}})}),[B]),Object(n.useEffect)((function(){N.repos.listCommits({owner:"CSSEGISandData",repo:"COVID-19"}).then((function(e){var t=f.a.values(e.data)[0].commit.committer.date;Y(b()(t).fromNow())}))}),[]),r.a.createElement(C.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:e.root},r.a.createElement(C.a,{item:!0},r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{variant:"outlined",className:e.formControl},r.a.createElement(g.a,{ref:le,id:"select-type-input-id"},"Type"),r.a.createElement(y.a,{labelId:"select-type-select-label",id:"select-type-select-id",value:B,onChange:be,labelWidth:de},f.a.map(f.a.keys(t),(function(e,t){return r.a.createElement(E.a,{key:t,value:e},e)}))))),r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{variant:"outlined",className:e.formControl},r.a.createElement(g.a,{ref:Z,id:"select-country-input-id"},"Location"),r.a.createElement(y.a,{labelId:"select-country-select-label",id:"select-country-select-id",value:I,onChange:fe,labelWidth:te},G.map((function(e,t){return r.a.createElement(E.a,{key:t,value:e},e)}))))),r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{variant:"outlined",className:e.formControl},r.a.createElement(g.a,{ref:ne,id:"select-days-input-id"},"Prediction"),r.a.createElement(y.a,{labelId:"select-days-select-label",id:"select-days-select-id",value:V,onChange:pe,labelWidth:oe},f.a.map(a,(function(e,t){return r.a.createElement(E.a,{key:e,value:e},t)})))))),X&&r.a.createElement(C.a,{item:!0,className:e.latestUpdate},r.a.createElement(O.a,{variant:"caption"},"Latest update ".concat(X))),r.a.createElement(C.a,{item:!0,className:e.chart},function(){var e=t[B],a=function(e){if("Worldwide"===e){var t=f.a.map(K,(function(e){return f.a.slice(f.a.values(e),4)}));return f.a.filter(f.a.reduce(t,(function(e,a,n){return e[n]=String(f.a.sum(f.a.map(t,(function(e){return Number(e[n])})))),e}),[]),(function(e){return Number(e)>0}))}return f.a.slice(f.a.values(f.a.find(K,(function(t){var a=-1!==f.a.indexOf(e,"/"),n=a?f.a.split(e,"/")[0]:e,r=a?f.a.split(e,"/")[1]:"";return t["Country/Region"]===n&&t["Province/State"]===r}))),4)}(I);return K.length?r.a.createElement(v,{labels:p,dataPerCountry:a,country:I,days:V,color:e}):""}()),r.a.createElement(C.a,{item:!0,className:e.footer},r.a.createElement(O.a,{variant:"caption"},r.a.createElement(k.a.OutboundLink,{eventLabel:"Data source",target:"_blank",to:"https://github.com/CSSEGISandData/COVID-19"},"Data source")," | ",r.a.createElement(k.a.OutboundLink,{eventLabel:"Feedback",target:"_blank",to:"https://t.me/coronavirus_spread"},"Feedback")," | ",r.a.createElement(k.a.OutboundLink,{eventLabel:"Github",target:"_blank",to:"https://github.com/ValeryP/coronavirus-spread"},"Github"))))},I=a(103),R=a(256);k.a.initialize("UA-160685541-1"),k.a.pageview(window.location.pathname);var W=Object(I.a)();o.a.render(r.a.createElement(R.a,{theme:W},r.a.createElement(_,null)),document.getElementById("root"))}},[[107,1,2]]]);
//# sourceMappingURL=main.bc720791.chunk.js.map