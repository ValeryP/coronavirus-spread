(this["webpackJsonpcoronavirus-spread"]=this["webpackJsonpcoronavirus-spread"]||[]).push([[0],{107:function(e,t,a){e.exports=a(220)},220:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),i=a(9),l=a(92),u=a.n(l),s=a(49),d=a(93),m=a(5),f=a.n(m),p=a(27),b=a.n(p);function v(e){var t=e.labels,a=e.dataPerCountry,n=e.country,o=e.days,c=e.color,i={backgroundColor:c+"AA",borderColor:c,pointBorderColor:c,pointHoverBackgroundColor:c,pointHoverBorderColor:c+"33",pointBackgroundColor:"#fff",fill:!1,lineTension:.1,borderCapStyle:"butt",borderDashOffset:0,borderJoinStyle:"miter",pointBorderWidth:1,pointHoverRadius:10,pointHoverBorderWidth:2,pointHitRadius:10},l=Object(s.a)({},i,{borderDash:[],pointRadius:3}),u=Object(s.a)({},i,{borderDash:[5,2],pointRadius:5,backgroundColor:"#000AA",borderColor:"#2196f3",pointBorderColor:"#2196f3",pointHoverBackgroundColor:"#2196f3",pointHoverBorderColor:"#00033"});function m(e,t,n){var r=function(e){var t=f.a.slice(a,a.length-e-1).filter((function(e){return"0"!==e})).length;return t<e?t-1:e}(n),o=f.a.slice(e,e.length-r-1),c=o.map((function(e,t){return 0===t?0:e-o[t-1]})).map((function(e,t){return 1+e/o[t]})),i=f.a.slice(c,c.length-r),l=i.reduce((function(e,t){return e+t}),0)/i.length||0;return f.a.reduce(f.a.range(1,+t+1),(function(e,t,a){return e[a]=Math.round(f.a.reduce(f.a.range(0,t),(function(e){return e*l}),1)*(f.a.last(o)||0)),e}),[])}return r.a.createElement(d.a,{data:function(){var e=a.map((function(e){return Number(e)})),r=function(e,t){for(var a=Array(t),n=3;n<e.length-1;n++){var r=m(f.a.takeRight(e,3),1,3);a[a.length]=f.a.last(r)}return a}(e,o);console.warn("xxx - existingData:",e),console.warn("xxx - prediction:",r);var c=f.a.concat(e,f.a.fill(Array(r.length-e.length),NaN)),i=f.a.concat(f.a.fill(Array(e.length),NaN),r),d=f.a.concat(t,function(e,t){return f.a.reduce(f.a.range(1,+t+1),(function(t,a,n){return t[n]=b()(e||Date.now()).add(n+1,"days").toDate(),t}),[])}(f.a.last(t),r.length)).map((function(e){return b()(e).format("ll")})),p=f.a.findIndex(c,(function(e){return e>0}))-1;return p=p<0?0:p,{labels:d.slice(p),datasets:[Object(s.a)({},l,{label:n,data:c.slice(p)}),Object(s.a)({},u,{label:n+" (predicted)",data:i.slice(p)})]}}(),width:100,height:45,legend:null})}var g=a(252),h=a(261),y=a(257),E=a(258),O=a(254),C=a(255),j=a(249),S=a(260),k=a(14),w=a(259),D=new(0,a(219).Octokit),N=Object(j.a)((function(e){return Object(S.a)({root:{marginLeft:0,margin:e.spacing(2),textAlign:"center"},formControl:{margin:e.spacing(2),minWidth:100},footer:{marginTop:e.spacing(2),opacity:.5},latestUpdate:{opacity:.5},chart:{width:"90%"}})}));var R=function(){var e=N(),t={Confirmed:"#f57c00",Deaths:"#FC562E",Recovered:"#388e3c"},a={Tomorrow:1,"2 days":2,"3 days":3,"1 week":7},o=Object(w.a)(["saved-prefs"]),c=Object(i.a)(o,2),l=c[0],s=c[1],d=Object(n.useState)([]),m=Object(i.a)(d,2),p=m[0],j=m[1],S=Object(n.useState)(l.country||"Worldwide"),R=Object(i.a)(S,2),_=R[0],I=R[1],W=Object(n.useState)(l.type||"Confirmed"),x=Object(i.a)(W,2),B=x[0],L=x[1],A=Object(n.useState)([]),H=Object(i.a)(A,2),P=H[0],F=H[1],G=Object(n.useState)(l.prediction||1),T=Object(i.a)(G,2),V=T[0],J=T[1],U=Object(n.useState)([]),z=Object(i.a)(U,2),K=z[0],M=z[1],q=Object(n.useState)(""),Q=Object(i.a)(q,2),X=Q[0],Y=Q[1],Z=r.a.useRef(null),$=r.a.useState(0),ee=Object(i.a)($,2),te=ee[0],ae=ee[1],ne=r.a.useRef(null),re=r.a.useState(0),oe=Object(i.a)(re,2),ce=oe[0],ie=oe[1],le=r.a.useRef(null),ue=r.a.useState(0),se=Object(i.a)(ue,2),de=se[0],me=se[1];r.a.useEffect((function(){ae(Z.current.offsetWidth),ie(ne.current.offsetWidth),me(le.current.offsetWidth)}),[]);var fe=function(e){var t=e.target.value;k.a.event({category:"Select",action:"Country",label:t}),s("country",t,{path:"/"}),I(t)},pe=function(e){var t=e.target.value;k.a.event({category:"Select",action:"Range",label:f.a.findKey(t)}),s("prediction",t,{path:"/"}),J(t)},be=function(e){var t=e.target.value;k.a.event({category:"Select",action:"Type",label:t}),s("type",t,{path:"/"}),L(t)};return Object(n.useEffect)((function(){u.a.parse("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-"+B+".csv",{skipEmptyLines:!0,header:!0,download:!0,delimiter:",",complete:function(e){var t=e.data,a=f.a.map(f.a.slice(f.a.keys(t[0]),4),(function(e){return b()(e).add(1,"days").toDate()})),n=f.a.concat(["Worldwide"],f.a.sortBy(t.map((function(e){return e["Province/State"].length>0?"".concat(e["Country/Region"],"/").concat(e["Province/State"]):e["Country/Region"]}))));F(n),j(a),M(t)}})}),[B]),Object(n.useEffect)((function(){D.repos.listCommits({owner:"CSSEGISandData",repo:"COVID-19"}).then((function(e){var t=f.a.values(e.data)[0].commit.committer.date;Y(b()(t).fromNow())}))}),[]),r.a.createElement(C.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:e.root},r.a.createElement(C.a,{item:!0},r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{variant:"outlined",className:e.formControl},r.a.createElement(h.a,{ref:le,id:"select-type-input-id"},"Type"),r.a.createElement(y.a,{labelId:"select-type-select-label",id:"select-type-select-id",value:B,onChange:be,labelWidth:de},f.a.map(f.a.keys(t),(function(e,t){return r.a.createElement(E.a,{key:t,value:e},e)}))))),r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{variant:"outlined",className:e.formControl},r.a.createElement(h.a,{ref:Z,id:"select-country-input-id"},"Location"),r.a.createElement(y.a,{labelId:"select-country-select-label",id:"select-country-select-id",value:_,onChange:fe,labelWidth:te},P.map((function(e,t){return r.a.createElement(E.a,{key:t,value:e},e)}))))),r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{variant:"outlined",className:e.formControl},r.a.createElement(h.a,{ref:ne,id:"select-days-input-id"},"Prediction"),r.a.createElement(y.a,{labelId:"select-days-select-label",id:"select-days-select-id",value:V,onChange:pe,labelWidth:ce},f.a.map(a,(function(e,t){return r.a.createElement(E.a,{key:e,value:e},t)})))))),X&&r.a.createElement(C.a,{item:!0,className:e.latestUpdate},r.a.createElement(O.a,{variant:"caption"},"Latest update ".concat(X))),r.a.createElement(C.a,{item:!0,className:e.chart},function(){var e=t[B],a=function(e){if("Worldwide"===e){var t=f.a.map(K,(function(e){return f.a.slice(f.a.values(e),4)}));return f.a.filter(f.a.reduce(t,(function(e,a,n){return e[n]=String(f.a.sum(f.a.map(t,(function(e){return Number(e[n])})))),e}),[]),(function(e){return Number(e)>0}))}return f.a.slice(f.a.values(f.a.find(K,(function(t){var a=-1!==f.a.indexOf(e,"/"),n=a?f.a.split(e,"/")[0]:e,r=a?f.a.split(e,"/")[1]:"";return t["Country/Region"]===n&&t["Province/State"]===r}))),4)}(_);return K.length?r.a.createElement(v,{labels:p,dataPerCountry:a,country:_,days:V,color:e}):""}()),r.a.createElement(C.a,{item:!0,className:e.footer},r.a.createElement(O.a,{variant:"caption"},r.a.createElement(k.a.OutboundLink,{eventLabel:"Data source",target:"_blank",to:"https://github.com/CSSEGISandData/COVID-19"},"Data source")," | ",r.a.createElement(k.a.OutboundLink,{eventLabel:"Feedback",target:"_blank",to:"https://t.me/coronavirus_spread"},"Feedback")," | ",r.a.createElement(k.a.OutboundLink,{eventLabel:"Github",target:"_blank",to:"https://github.com/ValeryP/coronavirus-spread"},"Github"))))},_=a(103),I=a(256);k.a.initialize("UA-160685541-1"),k.a.pageview(window.location.pathname);var W=Object(_.a)();c.a.render(r.a.createElement(I.a,{theme:W},r.a.createElement(R,null)),document.getElementById("root"))}},[[107,1,2]]]);
//# sourceMappingURL=main.2b9ae56f.chunk.js.map